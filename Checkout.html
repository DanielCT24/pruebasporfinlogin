
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> Editorial Grethel</title>
    <script src="JS - Principal.js" ></script>
    <script src="JS - Carrito.js" ></script>
    <link rel="stylesheet" href="CSS - Carrito.css"></link>
    <link rel="stylesheet" href="CSS - Checkout.css">
    <link rel="icon" sizes="180x180" href="ICON/android-chrome-192x192.webp">
    <link rel="icon" type="image/png" sizes="32x32" href="ICON/favicon-32x32.webp">
    <link rel="icon" type="image/png" sizes="16x16" href="ICON/favicon-16x16.webp">
    <link rel="manifest" href="site.webmanifest">
    <script src="https://kit.fontawesome.com/21bc0e3a65.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.css" />
 



</head>

<body>














<!-- Header - menu -->
<header>
    <div class="menu ">
        <a href="/"><img class="logo-1 " src="/LOGO.webp" alt=""></a>
        <input type="checkbox" id="menu">
        <label for="menu">
            <img src="/HEADER Y BODY/menu.webp" loading="lazy" class="menu-icono">



    
            <a href="/Usuario" class="btn__login">
                <img src="/Imagen-Login.webp" alt="Login" loading="lazy" class="login-icon">
                <h3 id="userName1">Nombre del Usuario</h3>
            </a>
            



        </label>

        <nav class="navbar fade-in">
            <div class="menu-1 fade-in">
                <div class="containermenu">
                
                    <ul>
                        <li><a href="/">Inicio</a></li>
                        <li><a href="/#ofertas">Ofertas</a></li>
                        <li><a href="/CATÁLOGO EDITORIAL GRETHEL.pdf">Catálogo</a></li>
                        <li><a href="https://maps.app.goo.gl/dawTfqAEDtirWpCu5">Envío</a></li>
                    </ul>
                </div>
            </div>




<!-------------------------------------------------- PC --------------->

            <a href="/"><img class="logo-2 " src="/LOGO.webp" alt=""></a>
            



            <a href="/Usuario" class="btn__login" id="loginButton">
                <img src="/Imagen-Login.webp" alt="Login" loading="lazy" class="login-icon-header">
                <h3 id="userName2">Nombre del Usuario</h3>

            </a>







        </nav>


    </div>
</header>

   


<main>


    <div class="container">
        <!-- Formulario de Información de Envío -->
        <div class="shipping-info">
            <h2>Información de Envío</h2>
            <form id="paymentForm">




                <div class="section">
                    <label> DIRECCIÓN</label>
                        <div class="search-container" >
                            <div class="search-box" >
                                <input type="text" id="searchInput" placeholder="Digite Su Departamento..." required>
                                <div class="search-icon">&#128269;</div>
                            </div>
                            <div class="dropdown-menu" id="dropdownMenu">
                                <!-- Opciones serán agregadas dinámicamente con JavaScript -->
                            </div>
                        </div>


                    <input type="text" id="street" placeholder="Calle y Número" required>
                    <input type="text" id="apartment" placeholder="Dpto, Oficina, etc. (*Opcional)">
                    <input type="text" id="postal-code" placeholder="Código Postal (*Opcional)">
                    <input type="text" id="alias" placeholder="Referencia">
                </div>

                <div class="delivery-container">
                    <label for="delivery">SELECCIONE UNA OPCIÓN DE ENVÍO DELIVERY</label>
                    
                    <div class="delivery-option" required>
                        <label>
                            <input type="radio" name="delivery" value="marvisur" required>
                            Marvisur <span class="info-icon"> 🚚  </span>
                        </label>
                        <span class="delivery-date">Tu pedido llegará entre el <span id="start-date1"></span> y <span id="end-date1"></span></span>
                    </div>
                    
                    <div class="delivery-option" required>
                        <label>
                            <input type="radio" name="delivery" value="olvacourier" required>
                            OlvaCourier <span class="info-icon"> 🚚  </span>
                        </label>
                        <span class="delivery-date">Tu pedido llegará entre el <span id="start-date2"></span> y <span id="end-date2"></span></span>
                    </div>
                    
                    <div class="delivery-option" required>
                        <label>
                            <input type="radio" name="delivery" value="shalom" required>
                            Shalom <span class="info-icon"> 🚚 </span>
                        </label>
                        <span class="delivery-date">Tu pedido llegará entre el <span id="start-date3"></span> y <span id="end-date3"></span></span>
                    </div>
                </div>
                




                <!-- Información de Contacto -->
                <div class="section">
                    <label for="email">INFORMACIÓN DE CONTACTO</label>
                    <input type="email" id="email" placeholder="Correo electrónico" required>
                    <div class="name-fields">
                        <input type="text" id="first-name" placeholder="Nombres" required>
                        <input type="text" id="last-name" placeholder="Apellidos"   required>
                    </div>
                    <div class="phone-fields">
                        <span class="flag-icon">🇵🇪</span>
                        <input type="tel" id="phone" placeholder="+51 999 999 999" maxlength="9" required>
                        
                    </div>
                    <input type="text" id="dni" placeholder="DNI" maxlength="8" required>
                </div>




<!-- Cupón de Descuento -->
<div class="section">
    <label for="coupon">CUPÓN DE DESCUENTO</label>
    <input type="text" id="coupon" placeholder="Ingresa tu cupón">
    <button type="button" id="validateCoupon">Validar Descuento</button>
</div>

                
            




                


                <!-- Método de Pago -->
                <div class="section">
                    <label>SELECCIONA MEDIO DE PAGO</label>
                    <div class="payment-methods" required>
                        <label>
                            <input type="radio" name="payment" value="yape" required>
                            <img class="pagoyape-img" src="BANCAMOVIL.avif" loading="lazy" alt="Yape">
                        </label>
                    </div>
                </div>
                












<div id="yape-popup" class="popup">
    <div class="popup-content">
        <span class="close-btn" onclick="closePopup('yape-popup')">&times;</span>
        <h2 class="txt-ventana">PAGO CON BANCAS MÓVILES</h2>
        <p>Gracias por su compra</p>
        <div class="yape-number">Editorial Grethel</div>
        <img src="qr.webp" loading="lazy" alt="QR Code" class="qr-code">
        <p>Total a pagar</p>
        <div class="summary-total">
            <p id="summaryTotalGeneral2">Total S/ 0.00</p>
        </div>
        <div class="form-group">
            <label for="operacion">Digita tu nro. de operación:</label>
            <input type="text" id="operacion" class="input-field" oninput="validateForm()">
        </div>
        <div class="form-group">
            <label for="confirma-operacion">Confirma tu nro. de operación:</label>
            <input type="text" id="confirma-operacion" class="input-field" oninput="validateForm()">
        </div>
        <p id="error-message" class="error-message"></p>

        <div class="form-group">
            <label for="fecha-hora">Fecha y hora de la operación:</label>
            <input type="datetime-local" id="fecha-hora" class="input-field" onchange="validateForm()">
        </div>
        <p class="warning">- La fecha y hora son requeridas</p>

        <!-- Adjuntar comprobante -->
        <input type="file" id="comprobante" class="input-file" onchange="handleFileUpload()">
        <label for="comprobante" class="upload-btn" id="upload-label">📎 Adjuntar comprobante</label>

        <button id="finalize-btn" class="finalize-btn" disabled onclick="finalizePurchase('¡Tu compra ha sido exitosa!')">Finalizar</button>

    </div>
    


<!-- Modal -->
<div id="customModal" class="custom-modal">
    <div class="custom-modal-content">
        <span class="custom-close" onclick="closeModal()">&times;</span>
        <div class="custom-modal-body">
            <div class="checkmark-wrapper">
                <div class="checkmark-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M20.285 6.711l-11.504 11.39-5.393-5.428-1.456 1.458 6.85 6.938 12.963-12.846-1.456-1.464z"/>
                    </svg>
                </div>
            </div>
            <p id="modalMessage">¡Felicidades por tu compra!</p>
            <p id="modalMessage">Revisa tu Cuenta</p>

        </div>
    </div>
</div>






</div>






                <!-- Términos y Condiciones -->
                <div class="section">
                    <label>
                        <input type="checkbox" id="terms" required>
                        He leído y acepto los <a href="#">términos y condiciones</a>
                    </label>
                    <label>
                        <input type="checkbox" id="privacy" required>
                        He leído y acepto la <a href="#">política de privacidad de datos</a>
                    </label>
                </div>
                <h5>- RELLENE LOS DATOS REQUERIDOS PARA CONTINUAR</h5>
                <button class="btn-detalles" id="btn-detalles" type="button" onclick="openPopup('yape-popup')" disabled>Finalizar Compra</button>

            </form>
        </div>

     <!-- Resumen de la Compra -->
      
     <div class="order-summary">
        <h2>Resumen de la compra</h2>

        <!-- Aquí se generarán los items del carrito -->
        <div id="summaryItems"></div>


     <div class="totales">
        <!-- Sección de totales y costo de envío -->
        <p id="summaryTotal2">S/ 0.00</p>
        <p id="costoImpuesto">IGV (18%): S/ 0.00</p>
        <p id="costoEnvio">Costo de envío: S/ 0.00</p>

        <div id="progress-container">
            <div id="progress-bar"></div>
        </div>
        <p id="free-shipping-message" style="display: none;">ENVÍO GRATIS DISPONIBLE</p>
        <p id="summaryTotalGeneral">Total S/ 0.00</p>
    </div>

        
    </div>
            </div>
        </div>


        
    </div>

    <script src="JS - Checkout.js"></script>
    <script src="JS - Checkout2.js"></script>
    <script src="JS - Departamentos.js"></script>
    <script src="JS - Principal.js"></script>
    <script src="JS - Usuario.js"></script>
    <script src="JS - Usuario-Login.js"></script>
</main>


<!-- Footer -->

<footer class="footer">
    <div class="footer-top">
        <div class="footer-container">
            <div class="footer-column">
                <h3 class="footer-title">Ubicación</h3>
                <p class="footer-text">Mercado Sur 125,</p><p> Huacho 15136</p>
            </div>
            <div class="footer-column">
                <h3 class="footer-title" id="contacto">Contacto</h3>
                <p class="footer-text">Email: editorialgrethel@gmail.com</p>
            </div>
            <div class="footer-column">
                <h3 class="footer-title">Síguenos</h3>
                <div class="social-links">
                    <a href="https://www.facebook.com/profile.php?id=61563910384955f" class="social-link" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                    <a href="https://wa.link/r2qn7g" class="social-link" aria-label="Whatsapp"><i class="fab fa-whatsapp"></i></a>
                </div>
            </div>
            <div class="footer-column">
                <h3 class="footer-title">Calificación</h3>
                <img src="AÑADIR IMAGENES/FOOTER/Estrellas.webp" loading="lazy" alt="Estrellas" class="imagenes">
            </div>
            <div class="footer-column">
                <h3 class="footer-title">Pagos</h3>
                <div class="payment-methods">
                    <img src="AÑADIR IMAGENES/FOOTER/visa.webp" alt="Visa" loading="lazy" class="payment-icon">
                    <img src="AÑADIR IMAGENES/FOOTER/paypal.webp" alt="Paypal" loading="lazy" class="payment-icon">
                    <img src="BANCAMOVIL.avif" alt="Vende Más" loading="lazy" class="payment-icon">
                </div>
            </div>
        </div>
    </div>
    <div class="footer-bottom">
        <div class="footer-bottom-content">
            <p>&copy; 2024 Editorial Grethel. Todos los derechos reservados.</p>

        </div>
    </div>

</footer>
    



<script src="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.js"></script>
<script src="JS - Header.js" ></script>
<script src="JS - Usuario.js" ></script>
<script src="VentanaEmergente.js"></script>


<!-- DESCUENTO -->



<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Función para validar el cupón
        document.getElementById('validateCoupon').addEventListener('click', function() {
            const couponInput = document.getElementById('coupon').value.trim(); // No convertir a mayúsculas, comparación estricta
            const discountRates = {
                "FACEBOOK": 0.10, // 10% de descuento
                "OFERTA": 0.15,  // 15% de descuento
                "EDITORIALGRETHEL": 0.20    // 20% de descuento
                // Agrega más códigos y descuentos aquí
            };
            
            // Obtener los elementos del total
            const summaryTotalElem1 = document.getElementById('summaryTotalGeneral');
            const summaryTotalElem2 = document.getElementById('summaryTotalGeneral2');
            const validateCouponButton = document.getElementById('validateCoupon');
            
            // Comprobar si los elementos del total y el botón existen
            if (!summaryTotalElem1 || !summaryTotalElem2 || !validateCouponButton) {
                console.error('Uno o más elementos necesarios no se encontraron.');
                return;
            }
            
            // Obtener el valor actual del total en summaryTotal1 y extraer el número
            const totalText1 = summaryTotalElem1.textContent;
            const totalMatch1 = totalText1.match(/S\/ (\d+(\.\d{2})?)/);
            let total1 = 0;
            
            if (totalMatch1) {
                total1 = parseFloat(totalMatch1[1]);
            } else {
                console.error('El formato del total en summaryTotal1 no es válido.');
                return;
            }
            
            // Obtener el valor actual del total en summaryTotal2 y extraer el número
            const totalText2 = summaryTotalElem2.textContent;
            const totalMatch2 = totalText2.match(/S\/ (\d+(\.\d{2})?)/);
            let total2 = 0;
            
            if (totalMatch2) {
                total2 = parseFloat(totalMatch2[1]);
            } else {
                console.error('El formato del total en summaryTotal2 no es válido.');
                return;
            }
            
            // Verificar si el cupón ingresado está en la lista de códigos válidos
            if (discountRates.hasOwnProperty(couponInput)) {
                const discountRate = discountRates[couponInput]; // Obtener el porcentaje de descuento correspondiente
                
                // Aplicar el descuento
                const newTotal1 = roundAmount(total1 * (1 - discountRate));
                const newTotal2 = roundAmount(total2 * (1 - discountRate));
                
                // Actualizar los valores en la página
                summaryTotalElem1.textContent = `Total: S/ ${newTotal1}`; // Mostrar sin decimales
                summaryTotalElem2.textContent = `S/ ${newTotal2}`; // Mostrar sin decimales
                
                // Deshabilitar el botón después de canjear el código
                validateCouponButton.disabled = true;
                
                alert(`Cupón aplicado correctamente. Se ha aplicado un ${discountRate * 100}% de descuento.`);
            } else {
                // Mostrar solo la alerta de cupón inválido
                alert('Cupón inválido. Inténtalo de nuevo.');
            }
        });
    
        // Función para redondear el monto
        function roundAmount(amount) {
            return Math.round(amount);
        }
    });
    </script>
    

<script>
  
  document.addEventListener('DOMContentLoaded', function() {
            fetch('data.json')
                .then(response => response.json())
                .then(data => {
                    const searchInput = document.getElementById('searchInput');
                    const dropdownMenu = document.getElementById('dropdownMenu');
                    let selectedDepartment = null;

                    function updateDropdown(results) {
                        dropdownMenu.innerHTML = results.map(result => {
                            return `<div class="dropdown-item" data-type="${result.type}" data-value="${result.value}">${result.value}</div>`;
                        }).join('');
                        dropdownMenu.style.display = results.length > 0 ? 'block' : 'none'; // Mostrar el menú solo si hay resultados
                    }

                    searchInput.addEventListener('input', function() {
                        const query = searchInput.value.trim().toLowerCase();
                        dropdownMenu.innerHTML = ''; // Limpiar el menú

                        if (query.length >= 3) {
                            const results = [];

                            // Filtrar departamentos
                            for (const department in data.departamentos) {
                                if (department.toLowerCase().includes(query)) {
                                    results.push({ type: 'department', value: department });
                                }
                            }

                            // Filtrar provincias y distritos basados en el departamento seleccionado
                            if (selectedDepartment) {
                                const deptData = data.departamentos[selectedDepartment];
                                Object.keys(deptData.distritos).forEach(province => {
                                    if (province.toLowerCase().includes(query)) {
                                        results.push({ type: 'province', value: province });
                                    }
                                    deptData.distritos[province].forEach(district => {
                                        if (district.toLowerCase().includes(query)) {
                                            results.push({ type: 'district', value: district });
                                        }
                                    });
                                });
                            }

                            // Mostrar resultados
                            if (results.length > 0) {
                                updateDropdown(results);
                            }
                        } else {
                            dropdownMenu.style.display = 'none'; // Ocultar el menú si el texto es menor a 3 caracteres
                        }
                    });

                    dropdownMenu.addEventListener('click', function(e) {
                        if (e.target.classList.contains('dropdown-item')) {
                            const type = e.target.getAttribute('data-type');
                            const value = e.target.getAttribute('data-value');

                            if (type === 'department') {
                                selectedDepartment = value;
                                searchInput.value = value;
                                // Actualizar menú para mostrar provincias y distritos
                                const deptData = data.departamentos[selectedDepartment];
                                const provinces = Object.keys(deptData.distritos).map(province => ({ type: 'province', value: province }));
                                const districts = [];
                                Object.values(deptData.distritos).forEach(districtArray => {
                                    districtArray.forEach(district => {
                                        districts.push({ type: 'district', value: district });
                                    });
                                });
                                updateDropdown([...provinces, ...districts]);
                            } else {
                                searchInput.value = value;
                                dropdownMenu.style.display = 'none'; // Ocultar menú después de selección
                            }
                        }
                    });
                })
                .catch(error => console.error('Error al cargar el archivo JSON:', error));
        });
</script>



<!-- Code injected by live-server -->
<script>
	// <![CDATA[  <-- For SVG support
	if ('WebSocket' in window) {
		(function () {
			function refreshCSS() {
				var sheets = [].slice.call(document.getElementsByTagName("link"));
				var head = document.getElementsByTagName("head")[0];
				for (var i = 0; i < sheets.length; ++i) {
					var elem = sheets[i];
					var parent = elem.parentElement || head;
					parent.removeChild(elem);
					var rel = elem.rel;
					if (elem.href && typeof rel != "string" || rel.length == 0 || rel.toLowerCase() == "stylesheet") {
						var url = elem.href.replace(/(&|\?)_cacheOverride=\d+/, '');
						elem.href = url + (url.indexOf('?') >= 0 ? '&' : '?') + '_cacheOverride=' + (new Date().valueOf());
					}
					parent.appendChild(elem);
				}
			}
			var protocol = window.location.protocol === 'http:' ? 'ws://' : 'wss://';
			var address = protocol + window.location.host + window.location.pathname + '/ws';
			var socket = new WebSocket(address);
			socket.onmessage = function (msg) {
				if (msg.data == 'reload') window.location.reload();
				else if (msg.data == 'refreshcss') refreshCSS();
			};
			if (sessionStorage && !sessionStorage.getItem('IsThisFirstTime_Log_From_LiveServer')) {
				console.log('Live reload enabled.');
				sessionStorage.setItem('IsThisFirstTime_Log_From_LiveServer', true);
			}
		})();
	}
	else {
		console.error('Upgrade your browser. This Browser is NOT supported WebSocket for Live-Reloading.');
	}
	// ]]>
</script>


<script>
    function formatDate(date) {
        const day = String(date.getDate()).padStart(2, '0');
        const month = String(date.getMonth() + 1).padStart(2, '0');
        const year = date.getFullYear();
        return `${day}-${month}-${year}`;
    }

    function updateDeliveryDates1() {
        const currentDate1 = new Date();
        const endDate1 = new Date(currentDate1);
        endDate1.setDate(currentDate1.getDate() + 3);

        document.getElementById('start-date1').textContent = formatDate(currentDate1);
        document.getElementById('end-date1').textContent = formatDate(endDate1);
    }

    function updateDeliveryDates2() {
        const currentDate2 = new Date();
        const endDate2 = new Date(currentDate2);
        endDate2.setDate(currentDate2.getDate() + 3);

        document.getElementById('start-date2').textContent = formatDate(currentDate2);
        document.getElementById('end-date2').textContent = formatDate(endDate2);
    }

    function updateDeliveryDates3() {
        const currentDate3 = new Date();
        const endDate3 = new Date(currentDate3);
        endDate3.setDate(currentDate3.getDate() + 3);

        document.getElementById('start-date3').textContent = formatDate(currentDate3);
        document.getElementById('end-date3').textContent = formatDate(endDate3);
    }

    // Llamando a las funciones para actualizar las 3 fechas
    updateDeliveryDates1();
    updateDeliveryDates2();
    updateDeliveryDates3();
</script>





<script>

function validateForm() {
    const operacion = document.getElementById('operacion').value;
    const confirmaOperacion = document.getElementById('confirma-operacion').value;
    const errorMessage = document.getElementById('error-message');
    
    if (operacion !== confirmaOperacion) {
        errorMessage.textContent = "Número de Operación diferente, revise de nuevo.";
    } else {
        errorMessage.textContent = "";
    }
}



</script>
















</body>
</html>

